version: "2"
services:
  cihm-metadatabus:
    env_file:
      - .env.secret
    build:
        context: .
        dockerfile: Dockerfile
    volumes:
      - ./CIHM-Meta:/home/tdr/CIHM-Meta
      - ./CIHM-Swift:/home/tdr/CIHM-Swift
    networks:
      - access-platform
    command: [ "perl", "./CIHM-Meta/bin/dmdtask" ]
networks:
  access-platform:
    external:
      name: access-platform